<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8">
  <title>G-CORE GENIE HOST • Konsole</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Manifest (falls vorhanden) -->
  <link rel="manifest" href="/gcore_manifest.json">

  <style>
    :root {
      /* G-Core Systems Farbpalette */
      --bg-dark:   #111214;
      --bg-darker: #050506;
      --text-light: #f5f5f7;
      --text-muted: #c8c8c8;
      --gold:       #d7b86f;
      --gold-soft:  #d7b86f33;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      min-height: 100vh;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background:
        radial-gradient(circle at top, #1d1f24 0, var(--bg-dark) 45%, var(--bg-darker) 100%);
      color: var(--text-light);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 24px;
    }

    .host-shell {
      width: 100%;
      max-width: 1200px;
      background: linear-gradient(145deg, #15161a, #090a0d);
      border-radius: 32px;
      padding: 28px 28px 32px;
      box-shadow:
        0 22px 60px rgba(0, 0, 0, 0.75),
        0 0 0 1px rgba(255, 255, 255, 0.02);
      position: relative;
      overflow: hidden;
    }

    .host-shell::before {
      content: "";
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at top left, #d7b86f22 0, transparent 50%);
      opacity: 0.8;
      pointer-events: none;
    }

    .host-inner {
      position: relative;
      z-index: 1;
      display: grid;
      grid-template-columns: minmax(0, 1.2fr) minmax(0, 1fr);
      gap: 24px;
    }

    @media (max-width: 900px) {
      .host-inner {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .headline-col {
      display: flex;
      flex-direction: column;
      gap: 18px;
    }

    .eyebrow {
      font-size: 11px;
      letter-spacing: 0.22em;
      text-transform: uppercase;
      color: var(--gold);
    }

    h1 {
      font-size: 26px;
      line-height: 1.25;
      text-transform: uppercase;
    }

    h1 span {
      color: var(--gold);
    }

    .subtext {
      font-size: 14px;
      color: var(--text-muted);
      max-width: 460px;
    }

    .badge-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 4px;
    }

    .pill {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      padding: 5px 10px;
      border-radius: 999px;
      border: 1px solid rgba(215, 184, 111, 0.35);
      background: linear-gradient(135deg, rgba(215, 184, 111, 0.12), rgba(215, 184, 111, 0.03));
      color: var(--text-light);
      white-space: nowrap;
    }

    .router-status {
      margin-top: auto;
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 12px;
      color: var(--text-muted);
    }

    .status-dot {
      width: 11px;
      height: 11px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 30%, #ffffff, #3fe077);
      box-shadow: 0 0 10px #33ff66aa;
    }

    .router-status strong {
      color: var(--text-light);
    }

    /* rechte Spalte: Konsole */

    .console-col {
      display: flex;
      flex-direction: column;
      gap: 18px;
    }

    .frame {
      border-radius: 24px;
      padding: 16px 18px 18px;
      background: radial-gradient(circle at top, #2b2d34 0, #17181d 40%, #101117 100%);
      border: 1px solid rgba(255, 255, 255, 0.04);
      box-shadow:
        0 14px 30px rgba(0, 0, 0, 0.7),
        0 0 0 1px rgba(0, 0, 0, 0.7);
    }

    .frame-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }

    .frame-title {
      font-size: 13px;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      color: var(--text-muted);
    }

    .frame-title span {
      color: var(--gold);
    }

    .endpoint {
      font-size: 11px;
      color: var(--text-muted);
      text-align: right;
      max-width: 260px;
    }

    .endpoint code {
      font-family: "SF Mono", ui-monospace, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 11px;
      padding: 2px 6px;
      border-radius: 999px;
      background: rgba(0, 0, 0, 0.55);
      border: 1px solid rgba(215, 184, 111, 0.5);
      color: var(--gold);
    }

    .prompt-row {
      display: grid;
      grid-template-columns: minmax(0, 1.4fr) minmax(0, 1.1fr);
      gap: 16px;
      margin-bottom: 14px;
    }

    @media (max-width: 900px) {
      .prompt-row {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .field {
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .field-label {
      font-size: 11px;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      color: var(--text-muted);
    }

    textarea {
      width: 100%;
      min-height: 120px;
      resize: vertical;
      border-radius: 18px;
      border: 1px solid rgba(255, 255, 255, 0.06);
      background: radial-gradient(circle at top, #22252b 0, #13151b 50%, #101117 100%);
      padding: 12px 14px;
      font-size: 14px;
      color: var(--text-light);
      outline: none;
    }

    textarea::placeholder {
      color: #7f848f;
    }

    .answer-box {
      min-height: 120px;
      border-radius: 18px;
      border: 1px solid rgba(255, 255, 255, 0.06);
      background: linear-gradient(160deg, #111217, #090a0f);
      padding: 12px 14px;
      font-size: 14px;
      color: var(--text-muted);
      display: flex;
      align-items: center;
    }

    .answer-box span {
      opacity: 0.8;
    }

    .answer-box strong {
      color: var(--text-light);
    }

    .model-row {
      display: grid;
      grid-template-columns: minmax(0, 1.1fr) minmax(0, 1.1fr);
      gap: 14px;
      margin-bottom: 16px;
    }

    @media (max-width: 560px) {
      .model-row {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .model-card,
    .temp-card {
      border-radius: 18px;
      padding: 10px 12px 12px;
      background: radial-gradient(circle at top, #292b32 0, #17181d 40%, #101117 100%);
      border: 1px solid rgba(255, 255, 255, 0.04);
    }

    .model-select {
      width: 100%;
      margin-top: 6px;
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid rgba(215, 184, 111, 0.5);
      background: radial-gradient(circle at top, #34363f 0, #181920 55%, #111217 100%);
      color: var(--text-light);
      font-size: 13px;
      outline: none;
      appearance: none;
      background-image: linear-gradient(45deg, transparent 50%, var(--gold) 50%),
                       linear-gradient(135deg, var(--gold) 50%, transparent 50%);
      background-position:
        calc(100% - 18px) 50%,
        calc(100% - 12px) 50%;
      background-size: 6px 6px;
      background-repeat: no-repeat;
    }

    .temp-slider-row {
      display: flex;
      flex-direction: column;
      gap: 6px;
      margin-top: 6px;
    }

    .temp-value {
      font-size: 11px;
      color: var(--text-muted);
      text-align: right;
    }

    .slider-wrap {
      width: 100%;
      display: flex;
      align-items: center;
    }

    input[type="range"] {
      -webkit-appearance: none;
      appearance: none;
      width: 100%;
      height: 6px;
      border-radius: 999px;
      background: linear-gradient(90deg, rgba(215, 184, 111, 0.2), rgba(215, 184, 111, 0.55));
      outline: none;
    }

    input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 14px;
      height: 14px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, #fff, #f7d680);
      box-shadow: 0 0 8px rgba(215, 184, 111, 0.7);
      cursor: pointer;
      border: 1px solid rgba(0, 0, 0, 0.8);
    }

    input[type="range"]::-moz-range-thumb {
      width: 14px;
      height: 14px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, #fff, #f7d680);
      box-shadow: 0 0 8px rgba(215, 184, 111, 0.7);
      cursor: pointer;
      border: 1px solid rgba(0, 0, 0, 0.8);
    }

    .footer-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
      margin-top: 4px;
    }

    .status-text {
      font-size: 11px;
      color: var(--text-muted);
    }

    .status-text strong {
      color: var(--gold);
    }

    .send-wrap {
      display: flex;
      justify-content: flex-end;
      align-items: center;
      gap: 10px;
    }

    .send-btn {
      position: relative;
      border: none;
      cursor: pointer;
      padding: 11px 30px 12px;
      border-radius: 999px;
      font-size: 13px;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      color: #1a1308;
      background: radial-gradient(circle at top, #ffe9a9 0, #f4c972 40%, #e6a947 100%);
      box-shadow:
        0 14px 30px rgba(0, 0, 0, 0.85),
        0 0 0 1px rgba(255, 255, 255, 0.15);
      display: inline-flex;
      align-items: center;
      gap: 8px;
      transition: transform 0.12s ease-out, box-shadow 0.12s ease-out, filter 0.12s ease-out;
    }

    .send-btn span.icon {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 18px;
      height: 18px;
      border-radius: 999px;
      background: rgba(0, 0, 0, 0.1);
      font-size: 13px;
    }

    .send-btn:disabled {
      filter: grayscale(0.4);
      cursor: wait;
      box-shadow:
        0 6px 14px rgba(0, 0, 0, 0.65),
        0 0 0 1px rgba(255, 255, 255, 0.05);
    }

    .send-btn:not(:disabled):hover {
      transform: translateY(-1px);
      box-shadow:
        0 18px 40px rgba(0, 0, 0, 0.95),
        0 0 0 1px rgba(255, 255, 255, 0.25);
    }

    .send-btn:not(:disabled):active {
      transform: translateY(0);
      box-shadow:
        0 10px 20px rgba(0, 0, 0, 0.8),
        0 0 0 1px rgba(255, 255, 255, 0.25);
    }
  </style>
</head>
<body>
  <main class="host-shell">
    <div class="host-inner">

      <!-- linke Spalte: Erklärung und Status -->
      <section class="headline-col">
        <div>
          <div class="eyebrow">G-CORE SYSTEMS</div>
          <h1>
            Deine eigene <span>Genie Instanz</span><br>
            direkt über den G-Core Router
          </h1>
          <p class="subtext">
            Nutze diese Konsole, um deinen produktiven Genie-Endpunkt über den G-Core Router zu testen.
            Alle Anfragen laufen durch deine eigene Architektur – ohne direkte Verbindung zu OpenAI im Frontend.
          </p>
          <div class="badge-row">
            <div class="pill">Router Modus</div>
            <div class="pill">Entwicklungs-Konsole</div>
            <div class="pill">Endpoint Genie</div>
          </div>
        </div>

        <div class="router-status">
          <div class="status-dot"></div>
          <div>
            <strong>Router aktiv</strong><br>
            <span>Alle Requests laufen über <code>api.g-core-systems.com</code></span>
          </div>
        </div>
      </section>

      <!-- rechte Spalte: Host Konsole -->
      <section class="console-col">
        <div class="frame">
          <div class="frame-header">
            <div class="frame-title">
              GENIE HOST <span>CONSOLE</span>
            </div>
            <div class="endpoint">
              Endpoint<br>
              <code id="endpointLabel">POST https://api.g-core-systems.com/genie</code>
            </div>
          </div>

          <div class="prompt-row">
            <div class="field">
              <div class="field-label">Prompt</div>
              <textarea id="promptInput" placeholder="Schreibe hier deinen Testprompt hinein – zum Beispiel: &#10;Sag mir bitte in einem Satz, was G-Core Systems aus deiner Sicht besonders macht."></textarea>
            </div>

            <div class="field">
              <div class="field-label">Antwort von Genie</div>
              <div id="answerBox" class="answer-box">
                <span><strong>(Noch keine Antwort erhalten)</strong><br>Die Antwort von Genie erscheint hier.</span>
              </div>
            </div>
          </div>

          <div class="model-row">
            <div class="model-card">
              <div class="field-label">Modell</div>
              <select id="modelSelect" class="model-select">
                <option value="gpt-4.1-mini">gpt-4.1-mini</option>
                <option value="gpt-4.1">gpt-4.1</option>
                <option value="gpt-4.1-nano">gpt-4.1-nano</option>
              </select>
            </div>

            <div class="temp-card">
              <div class="field-label">Temperatur</div>
              <div class="temp-slider-row">
                <div class="slider-wrap">
                  <input id="tempRange" type="range" min="0" max="1" step="0.05" value="0.7">
                </div>
                <div class="temp-value">
                  Aktuelle Einstellung: <span id="tempDisplay">0.70</span>
                </div>
              </div>
            </div>
          </div>

          <div class="footer-row">
            <div id="statusText" class="status-text">
              Bereit. Aktives Modell: <strong>gpt-4.1-mini</strong>
            </div>

            <div class="send-wrap">
              <button id="sendBtn" class="send-btn">
                <span class="icon">➜</span>
                <span>Senden</span>
              </button>
            </div>
          </div>
        </div>
      </section>

    </div>
  </main>

  <script>
    const API_URL = "https://api.g-core-systems.com/genie";

    const promptInput = document.getElementById("promptInput");
    const answerBox = document.getElementById("answerBox");
    const modelSelect = document.getElementById("modelSelect");
    const tempRange = document.getElementById("tempRange");
    const tempDisplay = document.getElementById("tempDisplay");
    const sendBtn = document.getElementById("sendBtn");
    const statusText = document.getElementById("statusText");

    // Temperatur-Anzeige aktualisieren
    function updateTempLabel() {
      tempDisplay.textContent = Number(tempRange.value).toFixed(2);
    }
    tempRange.addEventListener("input", updateTempLabel);
    updateTempLabel();

    modelSelect.addEventListener("change", () => {
      statusText.innerHTML = `Bereit. Aktives Modell: <strong>${modelSelect.value}</strong>`;
    });

    async function sendPrompt() {
      const prompt = promptInput.value.trim();
      const model = modelSelect.value;
      const temperature = Number(tempRange.value);

      if (!prompt) {
        statusText.innerHTML = "<span style='color:#ffb366'>Bitte einen Prompt eingeben.</span>";
        promptInput.focus();
        return;
      }

      sendBtn.disabled = true;
      statusText.innerHTML = "Sende Anfrage an Genie über den G-Core Router …";
      answerBox.innerHTML = "<span>Die Antwort wird geladen …</span>";

      try {
        const res = await fetch(API_URL, {
          method: "POST",
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify({
            prompt,
            model,
            temperature
          })
        });

        if (!res.ok) {
          const errText = await res.text();
          statusText.innerHTML = `<span style="color:#ff8b5c">HTTP-Fehler ${res.status}: ${res.statusText}</span>`;
          answerBox.innerHTML =
            `<span><strong>Die API hat mit einem Fehler geantwortet:</strong><br><br><code>${errText.replace(/</g, "&lt;")}</code></span>`;
          return;
        }

        const data = await res.json();

        // Erwartete Struktur aus deinem Router:
        // { ok: true, reply: "...", model: "...", ... }
        const reply =
  data.response ||
  data.reply ||
  (data.data && data.data.reply) ||
  "(Keine Antwort im JSON gefunden)";


        const usedModel = data.model || model;

        answerBox.innerHTML = `<span>${reply}</span>`;
        statusText.innerHTML =
          `Antwort erfolgreich von Genie erhalten. Aktives Modell: <strong>${usedModel}</strong>`;

      } catch (err) {
        console.error("Fetch-Fehler in G-CORE GENIE HOST:", err);
        statusText.innerHTML =
          `<span style="color:#ff8b5c">Fetch-Fehler: ${err.message || String(err)}</span>`;
        answerBox.innerHTML =
          `<span><strong>Der Browser konnte die Anfrage nicht erfolgreich abschließen.</strong><br><br>` +
          `Mögliche Ursachen:<br>` +
          `• Verbindungsproblem zum Router<br>` +
          `• Zertifikats- oder HTTPS-Problem<br>` +
          `• Der Router wurde gerade neu gestartet<br><br>` +
          `<span style="font-size:11px;opacity:0.8;">Details siehe Browser-Konsole (F12 → Console).</span></span>`;
      } finally {
        sendBtn.disabled = false;
      }
    }

    sendBtn.addEventListener("click", sendPrompt);
    promptInput.addEventListener("keydown", (ev) => {
      if ((ev.ctrlKey || ev.metaKey) && ev.key === "Enter") {
        sendPrompt();
      }
    });
  </script>
</body>
</html>
